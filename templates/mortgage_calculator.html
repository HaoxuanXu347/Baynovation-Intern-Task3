<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refinance Break Even Point Web Application</title>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <style>
        body {
            background-color: rgb(239, 234, 234);
            background-size: cover;
            background-repeat: no-repeat;
            width: 100%; /* or any specific value you prefer */
            margin: 0 ;
        }
        #getStarted {
            background-color: rgb(93, 183, 153);
            font-size: 15px;
            cursor: pointer;
            position: fixed;
            border-radius: 10px;
            top: 6%; 
            right: 30px;
            z-index: 1001;
            transform: translateY(-50%); 
        }

        nav{
            background-color: rgb(113, 182, 113);
            position: absolute;
            top: 12%;
            height: 50px;
            width: 100%;
        }

        .above-nav {
            background-color: white; /* Color for the area above the nav bar */
            height: 100px; /* Set this to control the height of the area above the nav bar */
        }

        nav ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  justify-content:left;
}

nav a {
  text-decoration: none;
  color: #333;
  padding: 10px 20px;
  display: block;
}
        
#section1, #section2, #section3, #section4, #section5, #section6{
  padding-top: 0;
  padding-left: 0;
  margin-left: 0;
  min-height: 120vh;
  font-size: 16px;
  font-weight: bold;
}

        div h1{
            position: relative;
            text-align: center;
        }
        .active {
            color: red; 
        }

        .amortization-table {
            width: 100%;
            border-collapse: collapse;
        }
        .amortization-table th, .amortization-table td {
            padding: 10px;
            border: 1px solid black;
            text-align: center;
        }
        
    </style>
    
</head>
<body style="height: 15000px;">
    <button id="getStarted">Get Started</button>
    
    <div id="section1">

        <div class="above-nav">
            <img src="/static/logo.jpg" alt="Baynovation Logo" 
            style="position: absolute; left: 70px; top: 0px; font-size: xx-small; border-radius: 100%; width: 120px; height: 120px;">
        </div>

        <nav>
            <ul>
              <li><a href="#section1">Section 1</a></li>
              <li><a href="#section2">Section 2</a></li>
              <li><a href="#section3">Section 3</a></li>
              <li><a href="#section4">Section 4</a></li>
              <li><a href="#section5">Section 5</a></li>
            </ul>
          </nav>

        <div >
            <h1 style="position: absolute; left: 480px; top: 160px;">Refinance break-even point Calculator</h1>
            <h2 style="position: absolute; left: 80px; top: 220px;"> Data</h2>
            <h2 style="position: absolute; left: 830px; top: 220px;"> Formulas</h2>
    
    
            <table border="1"  style="position: absolute; left: 80px; top: 280px;">
                <tr>
                    <th>Column</th>
                    <th>Description</th>
                </tr>
                {% for key, value in description.items() %}
                <tr>
                    <td>{{ key }}</td>
                    <td>{{ value }}</td>
                </tr>
                {% endfor %}
            </table>
    
            <div style="position: absolute; right: 50px; top: 280px;">
                <h4>1. Monthly Payment</h4>
                <p>The monthly payment is calculated using the following formula:</p>
                <center>
                    <p>\( M = P \frac{r(1 + r)^n}{(1+r)^n - 1} \)</p>
                </center>
                <p>where \( M \) is the monthly payment, \( P \) is the principal (Outstanding balance), \( r \) is 
                <br> the monthly interest rate, and \( n \) is the number of months.</p>
                <h4>2. Outstanding Balance</h4>
                <p>The outstanding balance is calculated using the following formula:</p>
                <center>
                    <p>Outstanding Balance \( = P \times (1 + r)^{(N-n)} - M \times \frac{(1 + r)^{(N-n)} - 1}{r} \)</p>
                </center></div>
    
                <h2 style="position: absolute; left: 80px; top: 580px;"> Definitions</h2>
                <ul style="position: absolute; left: 50px; top: 650px;">
                    <li>
                        <strong>Break even monthly payment savings:</strong> The number of months it will take for your monthly payment reduction to be greater than closing costs.<br>
                        <strong>Break even PMI & Interest savings:</strong> The number of months it will take for your interest and PMI savings to exceed your closing costs.<br>
                        <strong>Other closing costs:</strong> Estimate of all other closing costs for this loan. This should include filing fees, appraiser fees and any other miscellaneous fees paid.<br>
                        
                    </li>
                <p style="cursor: pointer; font-size: medium;">Credit: Shuyan Kang</p> 
                </ul>
        </div>
    

        
    </div>

    <div id="section2" style="width: 90%; margin: auto; border: 2px solid #ccc; border-radius: 15px; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
        <h1 style="text-align: center;">Refinance Calculator</h1>

        <form style="width: 12%; position: absolute;left: 10%" action="/" method="post">
            <label for="p">Principal:</label>
        <input type="number" id="p" name="p" required><br><br>
      
        <label for="r">Current interest rate:</label>
        <input type="float" id="r" name="r" required><br><br>

        <label for="N">Current total term:</label>
        <input type="number" id="N" name="N" required><br><br>

        <label for="n">Current remaining term:</label>
        <input type="number" id="n" name="n" required><br><br>

        <label for="new_r">New interest rate:</label>
        <input type="float" id="new_r" name="new_r" required><br><br>

        <label for="new_n">New remaining term:</label>
        <input type="number" id="new_n" name="new_n" required><br><br>

        <label for="c">Closing cost:</label>
        <input type="number" id="c" name="c" required><br><br>

        <label for="co">Cash out amount:</label>
        <input type="number" id="co" name="co" required><br><br>
        <button type="submit">Calculate</button>
        </form>
        
    </div>


    <div id="section3" style="width: 90%; margin: auto; border: 2px solid #ccc; border-radius: 15px; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
        <h1 style="text-align: center;">Break Even Point Analysis</h1>
        <div style="display: flex; justify-content: space-around;">
            
            {% if result %}
            <div style="width: 40%; border-left: 2px solid #ccc; padding-left: 20px; position: absolute;left: 10%">
                <h3>Results:</h3>
            <p>Break-even Point: {{ result['break_even_point']|round(2) }} months</p>
            <p>Monthly Savings: {{ result['monthly_savings']|round(2)  }}</p>
            <p>outstanding_principal_balance_adjusted: {{ result['outstanding_principal_balance_adjusted']|round(2)  }}</p>
            <p>current_monthly_payment: {{ result['current_monthly_payment']|round(2)  }}</p>
            <p>new_monthly_payment: {{ result['new_monthly_payment']|round(2)  }}</p>
            <p>new_monthly_payment_adjusted: {{ result['new_monthly_payment_adjusted']|round(2)  }}</p>
            </div>
            {% endif %}
        </div>
        {% if plot3_path %}
            <img src="{{ url_for('static', filename=plot3_path.split('/')[-1]) }}" alt="plot break even period" style="width: 58%; height: 60%; position: absolute; right: 10%">
        {% endif %}

    </div>

    <div id="section4" style="width: 90%; margin: auto; border: 2px solid #ccc; border-radius: 15px; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
        <h1 style="text-align: center;">Cumulative Savings Calculation</h1>
        <div style="display: flex; justify-content: space-around;">
            {% if result1  %}
            <div style="width: 40%; border-left: 2px solid #ccc; padding-left: 20px; position: absolute;left: 10%">
                <h3>Results:</h3>
                <p>Nominal Cost without Refinance: {{ result1['Nominal Cost without Refinance']|round(2) }}</p>
                <p>Nominal Cost with Refinance: {{ result1['Nominal Cost with Refinance']|round(2) }}</p>
                <p>Nominal Savings: {{ result1['Nominal Savings']|round(2) }}</p>
            </div>
            {% endif %}
        </div>
        {% if plot2_path %}
            <img src="{{ url_for('static', filename=plot2_path.split('/')[-1]) }}" alt="loan amortization schedule" style="width: 50%; height: 50%; position: absolute; top: 3000px; right: 100px">
        {% endif %}

        {% if plot4_path %}
            <img src="{{ url_for('static', filename=plot4_path.split('/')[-1]) }}" alt="savings_interval" style="width: 50%; height: 50%; position: absolute; top: 3400px; right: 100px">
        {% endif %}
    </div>

    
    <div id="section5" style="width: 90%; margin: auto; border: 2px solid #ccc; border-radius: 15px; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
        <h1 style="text-align: center;">Real-time Mortgage</h1>
        <div style="display: flex; justify-content: space-around; position: absolute; top: 4700px; left: 25%;">
            <table style="width: 100%; border-collapse: collapse; padding: 10px;
            border: 1px solid black;
            text-align: center;">
                <tr>
                    <th style="padding: 10px;  border: 1px solid black; text-align: center;">Rate Type</th>
                    {% for index, row in rate_data.iterrows() %}
                    <td style="padding: 10px;  border: 1px solid black; text-align: center;">{{ row['rate_type'] }}</td>
                    {% endfor %}
                </tr>
                <tr>
                    <th style="padding: 10px;  border: 1px solid black; text-align: center;">Rate</th>
                    {% for index, row in rate_data.iterrows() %}
                    <td style="padding: 10px;  border: 1px solid black; text-align: center;">{{ row['rate'] }}</td>
                    {% endfor %}
                </tr>
            </table>

            
        </div>

        <div class="container">
            <h2>Fixed-Rate Mortgage</h2>
            <p>A fixed-rate mortgage is a type of mortgage where the interest rate remains constant for the entire term of the loan. This provides borrowers with predictable monthly payments over the life of the loan.</p>
            
            <h2>Adjustable-Rate Mortgage (ARM)</h2>
            <p>An adjustable-rate mortgage, or ARM, has an interest rate that can change periodically. Typically, an ARM starts with a lower initial rate that adjusts after a set period. Borrowers should be aware of potential rate fluctuations.</p>
            
            <h2>Interest-Only Mortgage</h2>
            <p>With an interest-only mortgage, borrowers only pay the interest on the loan for a specific period. After that, they start paying both principal and interest. It can offer lower initial payments but may result in a larger final payment.</p>
            
            <h2>Federal Housing Administration (FHA) Loan</h2>
            <p>An FHA loan is a government-backed mortgage insured by the Federal Housing Administration. It is designed to help low-to-moderate-income borrowers with lower down payments and more lenient credit requirements.</p>
            
            <h2>Veterans Affairs (VA) Loan</h2>
            <p>VA loans are available to eligible veterans, active-duty service members, and some members of the National Guard and Reserves. These loans typically require no down payment and offer favorable terms.</p>
            
            <h2>Jumbo Loan</h2>
            <p>A jumbo loan is a type of mortgage that exceeds the conforming loan limits set by government agencies. They are often used for high-priced properties and may have stricter qualification requirements.</p>
        </div>
    </div>

    <div id="section6" style="width: 90%; margin: auto; border: 2px solid #ccc; border-radius: 15px; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
        <h1 style="text-align: center;">Amortization_Schedule</h1>
        <div style="display: flex; justify-content: space-evenly; background-image: url('/static/background.jpg'); background-size: cover; background-repeat: no-repeat;">
            {% if table_html %}
            <div style="width: 80%; border-left: 2px solid #ccc; padding-left: 20px; margin-left: 100px; overflow: auto;">
                <h3>Results:</h3>
                <div style="width: 100%; overflow-x: auto;">
                    <table style="width: 50%; max-width: 100%;">
                        {{ table_html|safe }}
                    </table>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    

    <script>

    </script>
    

    
</body>
</html>
